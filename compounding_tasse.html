<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <title>Accumulo vs Distribuzione ‚Äì Illusione del Dividendo</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="css/style.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f6f8;
            margin: 20px;
        }


        .inputs {
            display: grid;
            grid-template-columns: repeat(5, 1fr);            
            margin-bottom: 20px;            
        }

        label {
            font-weight: bold;
        }

        input,
        select {
            width: 100%;
            padding: 6px;
        }

        button {
            padding: 10px 25px;
            font-size: 16px;
            cursor: pointer;
            display: block;
            margin: auto;
        }

        canvas {
            margin-top: 30px;
        }

        .summary {
            margin-top: 25px;
            padding: 15px;
            background: #f0f8ff;
            border-radius: 6px;
        }

        .highlight {
            font-weight: bold;
            color: #b00020;
        }

        /* Smartphone */
        @media (max-width: 600px) {
            .inputs {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 22px;
            }

            h3 {
                font-size: 16px;
            }

            button {
                width: 100%;
                font-size: 18px;
            }

            input,
            select {
                font-size: 16px;
                padding: 10px;
            }

            label {
                font-size: 14px;
            }

            .explain {
                background: #eef4ff;
                padding: 15px;
                border-radius: 6px;
                margin-bottom: 25px;
            }

            .summary {
                margin-top: 25px;
                padding: 15px;
                background: #f0f8ff;
                border-radius: 6px;
            }

            .highlight {
                font-weight: bold;
                color: #b00020;
            }
        }
    </style>
</head>

<body class="bg-light">
    <div class="container mt-5 p-4 bg-white rounded shadow-sm">
        <div class="text-center mb-4">
            <a href="/FireSWR" class="home-button">üè† Home</a>
        </div>
        <br>

        <h1>Accumulo vs Distribuzione</h1>
        <h3>Effetto fiscale e illusione del dividendo</h3>
        <div class="explain">
            <p>
                Questa simulazione confronta due modalit√† di investimento sullo <b>medesimo asset</b>
                con lo <b>stesso rendimento totale annuo</b>.
            </p>
            <ul>
                <li>Nel caso <b>Accumulo</b> l‚Äôintero rendimento resta investito e viene tassato solo alla fine.</li>
                <li>Nel caso <b>Distribuzione</b> una parte del rendimento viene staccata come dividendo.</li>
            </ul>
            <p>
                Quando il dividendo viene staccato, il <b>prezzo dell‚Äôasset scende di pari importo</b>.
                La differenza finale nasce esclusivamente dalla <b>tassazione anticipata</b>,
                che riduce l‚Äôeffetto dell‚Äôinteresse composto.
            </p>
        </div>

        <div class="inputs">
            <div>
                <label>Cap.iniziale(‚Ç¨)</label>
                <input type="number" id="capital" value="10000">
            </div>
            <div>
                <label>Rend.tot.annuo(%)</label>
                <input type="number" id="rate" value="7" step="0.1">
            </div>
            <div>
                <label>Div.staccato(%)</label>
                <input type="number" id="dividend" value="2" step="0.1">
            </div>
            <div>
                <label>Aliquota</label>
                <select id="tax">
                    <option value="0.26">26% (ETF / Azioni)</option>
                    <option value="0.125">12,5% (Titoli di Stato)</option>
                </select>
            </div>
            <div>
                <label>Anni</label>
                <input type="number" id="years" value="20">
            </div>
        </div>

        <button onclick="simulate()">Simula</button>

        <canvas id="chart" height="120"></canvas>

        <div class="summary" id="summary"></div>

    </div>

    <script>
        let chart;

        function simulate() {

            const capital = parseFloat(document.getElementById("capital").value);
            const totalReturn = parseFloat(document.getElementById("rate").value) / 100;
            const dividendYield = parseFloat(document.getElementById("dividend").value) / 100;
            const years = parseInt(document.getElementById("years").value);
            const tax = parseFloat(document.getElementById("tax").value);

            const priceGrowth = totalReturn - dividendYield;

            let acc = capital;
            let dist = capital;

            let accHistory = [];
            let distHistory = [];
            let labels = [];

            let totalTaxes = 0;

            for (let year = 1; year <= years; year++) {

                // ACCUMULO
                acc *= (1 + totalReturn);

                // DISTRIBUZIONE
                dist *= (1 + priceGrowth);

                const grossDividend = dist * dividendYield;
                const taxPaid = grossDividend * tax;
                const netDividend = grossDividend - taxPaid;

                dist += netDividend;
                totalTaxes += taxPaid;

                accHistory.push(acc);
                distHistory.push(dist);
                labels.push("Anno " + year);
            }

            // Tassazione finale
            const accNet = acc - (acc - capital) * tax;
            const distNet = dist - (dist - capital) * tax;

            const diff = accNet - distNet;

            const accCAGR = Math.pow(accNet / capital, 1 / years) - 1;
            const distCAGR = Math.pow(distNet / capital, 1 / years) - 1;

            if (chart) chart.destroy();

            chart = new Chart(document.getElementById("chart"), {
                type: 'line',
                data: {
                    labels,
                    datasets: [
                        { label: 'Accumulo', data: accHistory, borderWidth: 2 },
                        { label: 'Distribuzione (netto)', data: distHistory, borderWidth: 2 }
                    ]
                }
            });

            document.getElementById("summary").innerHTML = `
        <h3>üìä Risultati finali</h3>
        
        <p><b>Accumulo ‚Äì Capitale lordo finale:</b> ${acc.toFixed(2)} ‚Ç¨</p>
        <p><b>Distribuzione ‚Äì Capitale lordo finale:</b> ${dist.toFixed(2)} ‚Ç¨</p>

        <hr>

        <p><b>Accumulo ‚Äì Capitale netto:</b> ${accNet.toFixed(2)} ‚Ç¨</p>
        <p><b>Distribuzione ‚Äì Capitale netto:</b> ${distNet.toFixed(2)} ‚Ç¨</p>

        <p class="highlight">
            Perdita dovuta alla tassazione anticipata:
            ${diff.toFixed(2)} ‚Ç¨ (${(diff / accNet * 100).toFixed(2)}%)
        </p>

        <hr>

        <p><b>Rendimento annuo netto effettivo:</b></p>
        <ul>
            <li>Accumulo: ${(accCAGR * 100).toFixed(2)}%</li>
            <li>Distribuzione: ${(distCAGR * 100).toFixed(2)}%</li>
        </ul>

        <p class="highlight">
            Tasse totali pagate sui dividendi: ${totalTaxes.toFixed(2)} ‚Ç¨
        </p>

        <p>
            Il dividendo non aumenta il rendimento totale:
            anticipa la tassazione e riduce l‚Äôinteresse composto.
        </p>
    `;
        }

        simulate();
    </script>
    <!-- Disclaimer -->
    <div id="disclaimer-container"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('html/disclaimer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('disclaimer-container').innerHTML = data;
                });
        });
    </script>
</body>

</html>